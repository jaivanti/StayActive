import pyautogui
import time
import threading
import tkinter as tk
from tkinter import font

# Global variables to control the mouse movement
running = False
thread = None

# Function to move the mouse back and forth
def move_mouse():
    while running:
        pyautogui.moveRel(50, 0)  # Move mouse 10 pixels to the right
        time.sleep(1)  # Wait for 1 second
        pyautogui.moveRel(-50, 0)  # Move mouse 10 pixels to the left
        time.sleep(1)

# Function to start the mouse movement
def start_movement():
    global running, thread
    running = True
    thread = threading.Thread(target=move_mouse)
    thread.start()

# Function to stop the mouse movement
def stop_movement():
    global running
    running = False
    if thread:
        thread.join()

# Creating the GUI
root = tk.Tk()
root.title("StayActive")

# Set the size of the window
root.geometry("300x150")

# Set a custom font
custom_font = font.Font(family="Helvetica", size=12, weight="bold")

# Create a frame with a background color
frame = tk.Frame(root, bg="#f0f0f0")
frame.pack(fill="both", expand=True)

# Create a title label
title_label = tk.Label(frame, text="MouseMover", font=("Helvetica", 16, "bold"), bg="#f0f0f0", fg="#333")
title_label.pack(pady=10)

# Create the Start button
start_button = tk.Button(frame, text="Start", command=start_movement, font=custom_font, bg="#4CAF50", fg="white", padx=10, pady=10)
start_button.pack(pady=10)

# Create the Stop button
stop_button = tk.Button(frame, text="Stop", command=stop_movement, font=custom_font, bg="#f44336", fg="white", padx=10, pady=10)
stop_button.pack(pady=10)

# Run the GUI
root.mainloop()
